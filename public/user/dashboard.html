<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechPix | Dashboard Infraestrutura</title>
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="icon" type="image/png" href="../assets/icon/logo.png" sizes="16x16">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const userData = {
            ID_EMPRESA: sessionStorage.getItem('ID_EMPRESA'),
            NOME_USUARIO: sessionStorage.getItem('NOME_USUARIO')
        };
    </script>
    <script src="../js/dashboard.js" defer></script>
</head>

<body>
    <div class="container">
        <nav class="nav-lateral">
            <div class="nav-logo-user">
                <img src="../uploads/perfil-padrão.png" alt="">
            </div>
            <div class="nav-texto">
                <h1>Olá, <span id="nome_usuario"></span></h1>
            </div>
            <div class="nav-botoes">
                <a id="atual" class="btn_nav">Servidores</a>
            </div>
            <div class="nav-botoes">
                <a href="../index.html" class="btn_nav">Suporte</a>
            </div>
            <div class="nav-botoes">
                <a href="../user/alertas.html" class="btn_nav">Alertas</a>
            </div>
            <div class="nav-botoes">
                <a href="../index.html" class="btn_nav" id="sair">Sair</a>
            </div>

        </nav>

        <div class="container-dash">
            <div class="container-kpis">
                <div class="kpis">
                    <div class="kpi">
                        <div class="kpi-texto">
                            <h1>Total de alertas ativos atualmente</h1>
                        </div>
                        <div class="kpi-media">
                            <h1 id="total-alertas">--</h1>
                        </div>
                    </div>
                    <div class="kpi">
                        <div class="kpi-texto">
                            <h1>Percentual de servidores sem alertas</h1>
                        </div>
                        <div class="kpi-percentual">
                            <h1 id="percent-sem-alertas">--%</h1>
                        </div>
                    </div>
                    <div class="kpi">
                        <div class="kpi-texto">
                            <h1>Percentual de servidores com alertas</h1>
                        </div>
                        <div class="kpi-componente">
                            <h1 id="percent-com-alertas">--%</h1>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container-grafico">
                <div class="graficos">
                    <div class="grafico">
                        <div class="listagem">
                            <div class="titulo">
                                <p>Servidor</p>
                                <p>Endereço MAC</p>
                                <p>Posição</p>
                                <p>Alertas</p>
                                <p>Situação</p>
                                <p>Hardware</p>
                            </div>
                            <hr>
                            <div id="loading-servidores" style="display: none; text-align: center; padding: 20px;">
                                <p>Carregando servidores...</p>
                            </div>
                            <div class="servidores" id="lista-servidores">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal" id="modal-detalhes" style="display: none;">
                <div class="content">
                    <button class="fechar-modal">&times;</button>
                    <div class="componente">
                        <h1 class="tituloComp">CPU:</h1>
                        <div class="card-container">
                            <div class="card">
                                <h3 class="subtituloComp">Uso da CPU:</h3>
                                <canvas id="usoCpu"></canvas>
                            </div>
                            <div class="card">
                                <h3 class="subtituloComp">Frequência da CPU:</h3>
                                <canvas id="freqCpu"></canvas>
                            </div>
                        </div>
                    </div>    
                    <div class="componente">
                        <h1 class="tituloComp">Disco:</h1>
                        <div class="card-container">
                            <div class="card">
                                <h3 class="subtituloComp">Armazenamento usado e disponível:</h3>
                                <canvas id="pizza2" width="400" height="300"></canvas>
                            </div>
                            <div class="card">
                                <h3 class="subtituloComp">Memória Swap usada e disponível:</h3>
                                <canvas id="pizza3" width="400" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="componente">
                        <h1 class="tituloComp">RAM:</h1>
                        <div class="card-container">
                            <div class="card">
                                <h3 class="subtituloComp">Memória usada e disponível:</h3>
                                <canvas id="ramUso"></canvas>
                            </div>
                            <div class="card">
                                <h3 class="subtituloComp">Porcentagem da RAM:</h3>
                                <canvas id="ramPorcentagem"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="componente">
                        <h1 class="tituloComp">Rede:</h1>
                        <div class="card-container">
                            <div class="card">
                                <h3 class="subtituloComp">Pacotes enviados:</h3>
                                <canvas id="redeEnviados"></canvas>
                            </div>
                            <div class="card">
                                <h3 class="subtituloComp">Pacotes recebidos:</h3>
                                <canvas id="redeRecebidos"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>