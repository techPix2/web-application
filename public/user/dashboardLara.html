<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Analista</title>
    <!-- apex -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- css -->
    <link rel="stylesheet" href="../css/dashLara.css">

    <!-- menu lateral -->
    <script src="../components/customMain/custommain.js"></script>
    <script src="../components/navbar/navbar.js"></script>
    <script src="../components/gustavo/chart-container/ChartContainer.js"></script>
</head>

<body onload="buscarServidoresComAlerta(), buscarChamadosStatus(),buscarChamadosUltimoDia(), fetchMessages();">
    <nav-bar></nav-bar>
    <custom-main>

        <!-- KPI -->
        <div class="kpi-container">

            <div class="kpi">
                <h2>Componente com mais alertas</h2>
                <h1 id="compMaisAlertas"></h1>
            </div>

            <div class="kpi">
                <h2>Total de alertas em 24h</h2>
                <span id="ChamadosUltimoDia"></span>
            </div>

            <div class="kpi">
                <h2>Chamados não atendidos</h2>
                <span id="chamadosStatus"></span>
            </div>

        </div>


        <!-- lista de servidores -->
        <div class="listagem-titulo">
            <h1>Servidores com componentes em estado CRÍTICO</h1>
        </div>
    </div>


        <div class="listagem-container">
            <div class="table-custom">
                <table class="table table-hover mb-0">
                    <thead>
                        <tr>
                            <th>Servidor</th>
                            <th>Status</th>
                            <th>Componente</th>
                            <th>Uso</th>
                            <th>Mais detalhes</th>
                        </tr>
                    </thead>
                    <tbody id="tabelaServidores">
                        <tr>
                            <td>
                                <!-- olho -->
                                <button class="button-eye" data-target="chartServidores">
                                    <i class="bi bi-eye"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <!-- gráfico servidores -->
                <div class="chart-wrapper" id="chartServidores" style="display: none;">
                    <div id="graficoServidor"></div>
                </div>
            </div>

        </div> <!--div listagem-container  -->



        <!-- slack -->

        <div class="slack-container">
            <div class="slack-header">
                Chat Slack
            </div>

            <div class="mensagens-container" id="mensagensContainer">
                <div class="loading"></div>
            </div>

            <div class="input-container">
                <input type="text" class="mensagem-input" id="messageInput" placeholder="Digite sua mensagem..."
                    onkeypress="handleKeyPress(event)">
                <button class="send-button" onclick="enviar()">Enviar</button>
            </div>
        </div>



        <!-- gráfico do status -->
        <div class="chart-container">
            <h1>Status dos Servidores</h1><br>
            <div class="chart" id="chart"></div>
        </div>


    </custom-main>


    <!-- javaScript -->
    <script src="../js/dashLara.js"></script>
</body>

</html>
